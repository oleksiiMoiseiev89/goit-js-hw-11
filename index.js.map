{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default function httpRequest(key, text) {\n  return fetch(\n    `https://pixabay.com/api/?key=${key}&q=${text}&image_type=photo&orientation=horizontal&safesearch=true`\n  );\n}\n","export default function createMarkup(array) {\n  return array\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"item\">\n          <a href=\"${largeImageURL}\"><img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n          <ul class=\"item-list\">\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Likes</h3>\n              <p class=\"value\">${likes}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Views</h3>\n              <p class=\"value\">${views}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Comments</h3>\n              <p class=\"value\">${comments}</p>\n            </li>\n            <li class=\"item-list-item\">\n              <h3 class=\"title\">Downloads</h3>\n              <p class=\"value\">${downloads}</p>\n            </li>\n          </ul>\n        </li>`;\n      }\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport httpRequest from './js/pixabay-api.js';\nimport createMarkup from './js/render-functions.js';\n\nconst key = '45158363-d126d9ec5bd50365e414d8df4';\nconst form = document.querySelector('.form');\nconst list = document.querySelector('.list');\n\nform.addEventListener('submit', searchHandler);\nfunction searchHandler(evt) {\n  list.innerHTML = '';\n  const text = evt.target.elements.input.value.trim();\n  evt.preventDefault();\n  if (text != 0) {\n    form.insertAdjacentHTML('afterend', '<span class=\"loader\"></span>');\n    const loader = document.querySelector('.loader');\n    httpRequest(key, text)\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(response.status);\n        }\n        return response.json();\n      })\n      .then(data => {\n        const photos = data.hits;\n        if (photos.length !== 0) {\n          list.insertAdjacentHTML('beforeend', createMarkup(photos));\n          const lightbox = new SimpleLightbox('.list a', {\n            captions: true,\n            captionType: 'attr',\n            captionsData: 'alt',\n            captionPosition: 'bottom',\n            captionDelay: 250,\n          });\n          lightbox.refresh();\n        } else {\n          iziToast.show({\n            class: 'toast',\n            position: 'topRight',\n            icon: 'icon',\n            iconUrl: err,\n            iconColor: 'white',\n            messageColor: 'white',\n            message: `Sorry, there are no images matching your search query. Please try again!`,\n            backgroundColor: 'red',\n          });\n        }\n      })\n      .catch(error => {\n        iziToast.show({\n          class: 'toast',\n          position: 'topRight',\n          icon: 'icon',\n          iconUrl: err,\n          iconColor: 'white',\n          messageColor: 'white',\n          title: 'Error',\n          titleColor: 'white',\n          message: `Please try again!`,\n        });\n        if (error.response) {\n          console.error('Server error:', error.response.status);\n        } else if (error.request) {\n          console.error('No response from server');\n        } else {\n          console.error('Unknown error:', error.message);\n        }\n      })\n      .finally(() => (loader.style.display = 'none'));\n    form.reset();\n  }\n}\n"],"names":["httpRequest","key","text","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","list","searchHandler","evt","loader","response","data","photos","SimpleLightbox","iziToast","error"],"mappings":"6vBAAe,SAASA,EAAYC,EAAKC,EAAM,CAC7C,OAAO,MACL,gCAAgCD,CAAG,MAAMC,CAAI,0DACjD,CACA,CCJe,SAASC,EAAaC,EAAO,CAC1C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,qBACML,CAAa,6BAA6BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,iCAIxDC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,iCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,iCAIRC,CAAS;AAAA;AAAA;AAAA,cAKrC,EACA,KAAK,EAAE,CACZ,CC7BA,MAAMV,EAAM,qCACNW,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAO,SAAS,cAAc,OAAO,EAE3CD,EAAK,iBAAiB,SAAUE,CAAa,EAC7C,SAASA,EAAcC,EAAK,CAC1BF,EAAK,UAAY,GACjB,MAAMX,EAAOa,EAAI,OAAO,SAAS,MAAM,MAAM,OAE7C,GADAA,EAAI,eAAc,EACdb,GAAQ,EAAG,CACbU,EAAK,mBAAmB,WAAY,8BAA8B,EAClE,MAAMI,EAAS,SAAS,cAAc,SAAS,EAC/ChB,EAAYC,EAAKC,CAAI,EAClB,KAAKe,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEjC,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKC,GAAQ,CACZ,MAAMC,EAASD,EAAK,KAChBC,EAAO,SAAW,GACpBN,EAAK,mBAAmB,YAAaV,EAAagB,CAAM,CAAC,EACxC,IAAIC,EAAe,UAAW,CAC7C,SAAU,GACV,YAAa,OACb,aAAc,MACd,gBAAiB,SACjB,aAAc,GAC1B,CAAW,EACQ,QAAO,GAEhBC,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,KAAM,OACN,QAAS,IACT,UAAW,QACX,aAAc,QACd,QAAS,2EACT,gBAAiB,KAC7B,CAAW,CAEX,CAAO,EACA,MAAMC,GAAS,CACdD,EAAS,KAAK,CACZ,MAAO,QACP,SAAU,WACV,KAAM,OACN,QAAS,IACT,UAAW,QACX,aAAc,QACd,MAAO,QACP,WAAY,QACZ,QAAS,mBACnB,CAAS,EACGC,EAAM,SACR,QAAQ,MAAM,gBAAiBA,EAAM,SAAS,MAAM,EAC3CA,EAAM,QACf,QAAQ,MAAM,yBAAyB,EAEvC,QAAQ,MAAM,iBAAkBA,EAAM,OAAO,CAEvD,CAAO,EACA,QAAQ,IAAON,EAAO,MAAM,QAAU,MAAO,EAChDJ,EAAK,MAAK,CACX,CACH"}